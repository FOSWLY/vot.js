var tG=Object.create;var{defineProperty:j0,getPrototypeOf:rG,getOwnPropertyNames:sG}=Object;var eG=Object.prototype.hasOwnProperty;var G$=(G,$,Y)=>{Y=G!=null?tG(rG(G)):{};const K=$||!G||!G.__esModule?j0(Y,"default",{value:G,enumerable:!0}):Y;for(let Q of sG(G))if(!eG.call(K,Q))j0(K,Q,{get:()=>G[Q],enumerable:!0});return K};var U=(G,$)=>()=>($||G(($={exports:{}}).exports,$),$.exports);var k0=(G,$)=>{for(var Y in $)j0(G,Y,{get:$[Y],enumerable:!0,configurable:!0,set:(K)=>$[Y]=()=>K})};var C$=U((gY,A$)=>{var GY=function(G,$){var Y=new Array(arguments.length-1),K=0,Q=2,X=!0;while(Q<arguments.length)Y[K++]=arguments[Q++];return new Promise(function H(q,M){Y[K]=function J(C){if(X)if(X=!1,C)M(C);else{var N=new Array(arguments.length-1),_=0;while(_<N.length)N[_++]=arguments[_];q.apply(null,N)}};try{G.apply($||null,Y)}catch(J){if(X)X=!1,M(J)}})};A$.exports=GY});var T$=U((D$)=>{var T0=D$;T0.length=function G($){var Y=$.length;if(!Y)return 0;var K=0;while(--Y%4>1&&$.charAt(Y)==="=")++K;return Math.ceil($.length*3)/4-K};var Q0=new Array(64),k$=new Array(123);for(j=0;j<64;)k$[Q0[j]=j<26?j+65:j<52?j+71:j<62?j-4:j-59|43]=j++;var j;T0.encode=function G($,Y,K){var Q=null,X=[],H=0,q=0,M;while(Y<K){var J=$[Y++];switch(q){case 0:X[H++]=Q0[J>>2],M=(J&3)<<4,q=1;break;case 1:X[H++]=Q0[M|J>>4],M=(J&15)<<2,q=2;break;case 2:X[H++]=Q0[M|J>>6],X[H++]=Q0[J&63],q=0;break}if(H>8191)(Q||(Q=[])).push(String.fromCharCode.apply(String,X)),H=0}if(q){if(X[H++]=Q0[M],X[H++]=61,q===1)X[H++]=61}if(Q){if(H)Q.push(String.fromCharCode.apply(String,X.slice(0,H)));return Q.join("")}return String.fromCharCode.apply(String,X.slice(0,H))};var F$="invalid encoding";T0.decode=function G($,Y,K){var Q=K,X=0,H;for(var q=0;q<$.length;){var M=$.charCodeAt(q++);if(M===61&&X>1)break;if((M=k$[M])===void 0)throw Error(F$);switch(X){case 0:H=M,X=1;break;case 1:Y[K++]=H<<2|(M&48)>>4,H=M,X=2;break;case 2:Y[K++]=(H&15)<<4|(M&60)>>2,H=M,X=3;break;case 3:Y[K++]=(H&3)<<6|M,X=0;break}}if(X===1)throw Error(F$);return K-Q};T0.test=function G($){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test($)}});var N$=U((lY,W$)=>{var W0=function(){this._listeners={}};W$.exports=W0;W0.prototype.on=function G($,Y,K){return(this._listeners[$]||(this._listeners[$]=[])).push({fn:Y,ctx:K||this}),this};W0.prototype.off=function G($,Y){if($===void 0)this._listeners={};else if(Y===void 0)this._listeners[$]=[];else{var K=this._listeners[$];for(var Q=0;Q<K.length;)if(K[Q].fn===Y)K.splice(Q,1);else++Q}return this};W0.prototype.emit=function G($){var Y=this._listeners[$];if(Y){var K=[],Q=1;for(;Q<arguments.length;)K.push(arguments[Q++]);for(Q=0;Q<Y.length;)Y[Q].fn.apply(Y[Q++].ctx,K)}return this}});var x$=U((nY,E$)=>{var _$=function(G){if(typeof Float32Array!=="undefined")(function(){var $=new Float32Array([-0]),Y=new Uint8Array($.buffer),K=Y[3]===128;function Q(M,J,C){$[0]=M,J[C]=Y[0],J[C+1]=Y[1],J[C+2]=Y[2],J[C+3]=Y[3]}function X(M,J,C){$[0]=M,J[C]=Y[3],J[C+1]=Y[2],J[C+2]=Y[1],J[C+3]=Y[0]}G.writeFloatLE=K?Q:X,G.writeFloatBE=K?X:Q;function H(M,J){return Y[0]=M[J],Y[1]=M[J+1],Y[2]=M[J+2],Y[3]=M[J+3],$[0]}function q(M,J){return Y[3]=M[J],Y[2]=M[J+1],Y[1]=M[J+2],Y[0]=M[J+3],$[0]}G.readFloatLE=K?H:q,G.readFloatBE=K?q:H})();else(function(){function $(K,Q,X,H){var q=Q<0?1:0;if(q)Q=-Q;if(Q===0)K(1/Q>0?0:2147483648,X,H);else if(isNaN(Q))K(2143289344,X,H);else if(Q>340282346638528860000000000000000000000)K((q<<31|2139095040)>>>0,X,H);else if(Q<0.000000000000000000000000000000000000011754943508222875)K((q<<31|Math.round(Q/0.000000000000000000000000000000000000000000001401298464324817))>>>0,X,H);else{var M=Math.floor(Math.log(Q)/Math.LN2),J=Math.round(Q*Math.pow(2,-M)*8388608)&8388607;K((q<<31|M+127<<23|J)>>>0,X,H)}}G.writeFloatLE=$.bind(null,O$),G.writeFloatBE=$.bind(null,U$);function Y(K,Q,X){var H=K(Q,X),q=(H>>31)*2+1,M=H>>>23&255,J=H&8388607;return M===255?J?NaN:q*Infinity:M===0?q*0.000000000000000000000000000000000000000000001401298464324817*J:q*Math.pow(2,M-150)*(J+8388608)}G.readFloatLE=Y.bind(null,I$),G.readFloatBE=Y.bind(null,R$)})();if(typeof Float64Array!=="undefined")(function(){var $=new Float64Array([-0]),Y=new Uint8Array($.buffer),K=Y[7]===128;function Q(M,J,C){$[0]=M,J[C]=Y[0],J[C+1]=Y[1],J[C+2]=Y[2],J[C+3]=Y[3],J[C+4]=Y[4],J[C+5]=Y[5],J[C+6]=Y[6],J[C+7]=Y[7]}function X(M,J,C){$[0]=M,J[C]=Y[7],J[C+1]=Y[6],J[C+2]=Y[5],J[C+3]=Y[4],J[C+4]=Y[3],J[C+5]=Y[2],J[C+6]=Y[1],J[C+7]=Y[0]}G.writeDoubleLE=K?Q:X,G.writeDoubleBE=K?X:Q;function H(M,J){return Y[0]=M[J],Y[1]=M[J+1],Y[2]=M[J+2],Y[3]=M[J+3],Y[4]=M[J+4],Y[5]=M[J+5],Y[6]=M[J+6],Y[7]=M[J+7],$[0]}function q(M,J){return Y[7]=M[J],Y[6]=M[J+1],Y[5]=M[J+2],Y[4]=M[J+3],Y[3]=M[J+4],Y[2]=M[J+5],Y[1]=M[J+6],Y[0]=M[J+7],$[0]}G.readDoubleLE=K?H:q,G.readDoubleBE=K?q:H})();else(function(){function $(K,Q,X,H,q,M){var J=H<0?1:0;if(J)H=-H;if(H===0)K(0,q,M+Q),K(1/H>0?0:2147483648,q,M+X);else if(isNaN(H))K(0,q,M+Q),K(2146959360,q,M+X);else if(H>179769313486231570000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000)K(0,q,M+Q),K((J<<31|2146435072)>>>0,q,M+X);else{var C;if(H<0.000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000022250738585072014)C=H/0.000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005,K(C>>>0,q,M+Q),K((J<<31|C/4294967296)>>>0,q,M+X);else{var N=Math.floor(Math.log(H)/Math.LN2);if(N===1024)N=1023;C=H*Math.pow(2,-N),K(C*4503599627370496>>>0,q,M+Q),K((J<<31|N+1023<<20|C*1048576&1048575)>>>0,q,M+X)}}}G.writeDoubleLE=$.bind(null,O$,0,4),G.writeDoubleBE=$.bind(null,U$,4,0);function Y(K,Q,X,H,q){var M=K(H,q+Q),J=K(H,q+X),C=(J>>31)*2+1,N=J>>>20&2047,_=4294967296*(J&1048575)+M;return N===2047?_?NaN:C*Infinity:N===0?C*0.000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005*_:C*Math.pow(2,N-1075)*(_+4503599627370496)}G.readDoubleLE=Y.bind(null,I$,0,4),G.readDoubleBE=Y.bind(null,R$,4,0)})();return G},O$=function(G,$,Y){$[Y]=G&255,$[Y+1]=G>>>8&255,$[Y+2]=G>>>16&255,$[Y+3]=G>>>24},U$=function(G,$,Y){$[Y]=G>>>24,$[Y+1]=G>>>16&255,$[Y+2]=G>>>8&255,$[Y+3]=G&255},I$=function(G,$){return(G[$]|G[$+1]<<8|G[$+2]<<16|G[$+3]<<24)>>>0},R$=function(G,$){return(G[$]<<24|G[$+1]<<16|G[$+2]<<8|G[$+3])>>>0};E$.exports=_$(_$)});var L$=U((P$,p0)=>{function YY(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(G){}return null}p0.exports=YY});var S$=U((w$)=>{var f0=w$;f0.length=function G($){var Y=0,K=0;for(var Q=0;Q<$.length;++Q)if(K=$.charCodeAt(Q),K<128)Y+=1;else if(K<2048)Y+=2;else if((K&64512)===55296&&($.charCodeAt(Q+1)&64512)===56320)++Q,Y+=4;else Y+=3;return Y};f0.read=function G($,Y,K){var Q=K-Y;if(Q<1)return"";var X=null,H=[],q=0,M;while(Y<K){if(M=$[Y++],M<128)H[q++]=M;else if(M>191&&M<224)H[q++]=(M&31)<<6|$[Y++]&63;else if(M>239&&M<365)M=((M&7)<<18|($[Y++]&63)<<12|($[Y++]&63)<<6|$[Y++]&63)-65536,H[q++]=55296+(M>>10),H[q++]=56320+(M&1023);else H[q++]=(M&15)<<12|($[Y++]&63)<<6|$[Y++]&63;if(q>8191)(X||(X=[])).push(String.fromCharCode.apply(String,H)),q=0}if(X){if(q)X.push(String.fromCharCode.apply(String,H.slice(0,q)));return X.join("")}return String.fromCharCode.apply(String,H.slice(0,q))};f0.write=function G($,Y,K){var Q=K,X,H;for(var q=0;q<$.length;++q)if(X=$.charCodeAt(q),X<128)Y[K++]=X;else if(X<2048)Y[K++]=X>>6|192,Y[K++]=X&63|128;else if((X&64512)===55296&&((H=$.charCodeAt(q+1))&64512)===56320)X=65536+((X&1023)<<10)+(H&1023),++q,Y[K++]=X>>18|240,Y[K++]=X>>12&63|128,Y[K++]=X>>6&63|128,Y[K++]=X&63|128;else Y[K++]=X>>12|224,Y[K++]=X>>6&63|128,Y[K++]=X&63|128;return K-Q}});var V$=U((aY,B$)=>{var KY=function(G,$,Y){var K=Y||8192,Q=K>>>1,X=null,H=K;return function q(M){if(M<1||M>Q)return G(M);if(H+M>K)X=G(K),H=0;var J=$.call(X,H,H+=M);if(H&7)H=(H|7)+1;return J}};B$.exports=KY});var j$=U((oY,y$)=>{var R=function(G,$){this.lo=G>>>0,this.hi=$>>>0};y$.exports=R;var J0=o(),r=R.zero=new R(0,0);r.toNumber=function(){return 0};r.zzEncode=r.zzDecode=function(){return this};r.length=function(){return 1};var QY=R.zeroHash="\0\0\0\0\0\0\0\0";R.fromNumber=function G($){if($===0)return r;var Y=$<0;if(Y)$=-$;var K=$>>>0,Q=($-K)/4294967296>>>0;if(Y){if(Q=~Q>>>0,K=~K>>>0,++K>4294967295){if(K=0,++Q>4294967295)Q=0}}return new R(K,Q)};R.from=function G($){if(typeof $==="number")return R.fromNumber($);if(J0.isString($))if(J0.Long)$=J0.Long.fromString($);else return R.fromNumber(parseInt($,10));return $.low||$.high?new R($.low>>>0,$.high>>>0):r};R.prototype.toNumber=function G($){if(!$&&this.hi>>>31){var Y=~this.lo+1>>>0,K=~this.hi>>>0;if(!Y)K=K+1>>>0;return-(Y+K*4294967296)}return this.lo+this.hi*4294967296};R.prototype.toLong=function G($){return J0.Long?new J0.Long(this.lo|0,this.hi|0,Boolean($)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean($)}};var a=String.prototype.charCodeAt;R.fromHash=function G($){if($===QY)return r;return new R((a.call($,0)|a.call($,1)<<8|a.call($,2)<<16|a.call($,3)<<24)>>>0,(a.call($,4)|a.call($,5)<<8|a.call($,6)<<16|a.call($,7)<<24)>>>0)};R.prototype.toHash=function G(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};R.prototype.zzEncode=function G(){var $=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^$)>>>0,this.lo=(this.lo<<1^$)>>>0,this};R.prototype.zzDecode=function G(){var $=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^$)>>>0,this.hi=(this.hi>>>1^$)>>>0,this};R.prototype.length=function G(){var $=this.lo,Y=(this.lo>>>28|this.hi<<4)>>>0,K=this.hi>>>24;return K===0?Y===0?$<16384?$<128?1:2:$<2097152?3:4:Y<16384?Y<128?5:6:Y<2097152?7:8:K<128?9:10}});var o=U((m0)=>{var h$=function(G,$,Y){for(var K=Object.keys($),Q=0;Q<K.length;++Q)if(G[K[Q]]===void 0||!Y)G[K[Q]]=$[K[Q]];return G},v$=function(G){function $(Y,K){if(!(this instanceof $))return new $(Y,K);if(Object.defineProperty(this,"message",{get:function(){return Y}}),Error.captureStackTrace)Error.captureStackTrace(this,$);else Object.defineProperty(this,"stack",{value:new Error().stack||""});if(K)h$(this,K)}return $.prototype=Object.create(Error.prototype,{constructor:{value:$,writable:!0,enumerable:!1,configurable:!0},name:{get:function Y(){return G},set:void 0,enumerable:!1,configurable:!0},toString:{value:function Y(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),$},F=m0;F.asPromise=C$();F.base64=T$();F.EventEmitter=N$();F.float=x$();F.inquire=L$();F.utf8=S$();F.pool=V$();F.LongBits=j$();F.isNode=Boolean(typeof global!=="undefined"&&global&&global.process&&global.process.versions&&global.process.versions.node);F.global=F.isNode&&global||typeof window!=="undefined"&&window||typeof self!=="undefined"&&self||m0;F.emptyArray=Object.freeze?Object.freeze([]):[];F.emptyObject=Object.freeze?Object.freeze({}):{};F.isInteger=Number.isInteger||function G($){return typeof $==="number"&&isFinite($)&&Math.floor($)===$};F.isString=function G($){return typeof $==="string"||$ instanceof String};F.isObject=function G($){return $&&typeof $==="object"};F.isset=F.isSet=function G($,Y){var K=$[Y];if(K!=null&&$.hasOwnProperty(Y))return typeof K!=="object"||(Array.isArray(K)?K.length:Object.keys(K).length)>0;return!1};F.Buffer=function(){try{var G=F.inquire("buffer").Buffer;return G.prototype.utf8Write?G:null}catch($){return null}}();F._Buffer_from=null;F._Buffer_allocUnsafe=null;F.newBuffer=function G($){return typeof $==="number"?F.Buffer?F._Buffer_allocUnsafe($):new F.Array($):F.Buffer?F._Buffer_from($):typeof Uint8Array==="undefined"?$:new Uint8Array($)};F.Array=typeof Uint8Array!=="undefined"?Uint8Array:Array;F.Long=F.global.dcodeIO&&F.global.dcodeIO.Long||F.global.Long||F.inquire("long");F.key2Re=/^true|false|0|1$/;F.key32Re=/^-?(?:0|[1-9][0-9]*)$/;F.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;F.longToHash=function G($){return $?F.LongBits.from($).toHash():F.LongBits.zeroHash};F.longFromHash=function G($,Y){var K=F.LongBits.fromHash($);if(F.Long)return F.Long.fromBits(K.lo,K.hi,Y);return K.toNumber(Boolean(Y))};F.merge=h$;F.lcFirst=function G($){return $.charAt(0).toLowerCase()+$.substring(1)};F.newError=v$;F.ProtocolError=v$("ProtocolError");F.oneOfGetter=function G($){var Y={};for(var K=0;K<$.length;++K)Y[$[K]]=1;return function(){for(var Q=Object.keys(this),X=Q.length-1;X>-1;--X)if(Y[Q[X]]===1&&this[Q[X]]!==void 0&&this[Q[X]]!==null)return Q[X]}};F.oneOfSetter=function G($){return function(Y){for(var K=0;K<$.length;++K)if($[K]!==Y)delete this[$[K]]}};F.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};F._configure=function(){var G=F.Buffer;if(!G){F._Buffer_from=F._Buffer_allocUnsafe=null;return}F._Buffer_from=G.from!==Uint8Array.from&&G.from||function $(Y,K){return new G(Y,K)},F._Buffer_allocUnsafe=G.allocUnsafe||function $(Y){return new G(Y)}}});var a0=U((tY,m$)=>{var q0=function(G,$,Y){this.fn=G,this.len=$,this.next=void 0,this.val=Y},d0=function(){},XY=function(G){this.head=G.head,this.tail=G.tail,this.len=G.len,this.next=G.states},T=function(){this.len=0,this.head=new q0(d0,0,0),this.tail=this.head,this.states=null},l0=function(G,$,Y){$[Y]=G&255},HY=function(G,$,Y){while(G>127)$[Y++]=G&127|128,G>>>=7;$[Y]=G},n0=function(G,$){this.len=G,this.next=void 0,this.val=$},u0=function(G,$,Y){while(G.hi)$[Y++]=G.lo&127|128,G.lo=(G.lo>>>7|G.hi<<25)>>>0,G.hi>>>=7;while(G.lo>127)$[Y++]=G.lo&127|128,G.lo=G.lo>>>7;$[Y++]=G.lo},g0=function(G,$,Y){$[Y]=G&255,$[Y+1]=G>>>8&255,$[Y+2]=G>>>16&255,$[Y+3]=G>>>24};m$.exports=T;var B=o(),b0,N0=B.LongBits,c$=B.base64,p$=B.utf8,f$=function G(){return B.Buffer?function $(){return(T.create=function Y(){return new b0})()}:function $(){return new T}};T.create=f$();T.alloc=function G($){return new B.Array($)};if(B.Array!==Array)T.alloc=B.pool(T.alloc,B.Array.prototype.subarray);T.prototype._push=function G($,Y,K){return this.tail=this.tail.next=new q0($,Y,K),this.len+=Y,this};n0.prototype=Object.create(q0.prototype);n0.prototype.fn=HY;T.prototype.uint32=function G($){return this.len+=(this.tail=this.tail.next=new n0(($=$>>>0)<128?1:$<16384?2:$<2097152?3:$<268435456?4:5,$)).len,this};T.prototype.int32=function G($){return $<0?this._push(u0,10,N0.fromNumber($)):this.uint32($)};T.prototype.sint32=function G($){return this.uint32(($<<1^$>>31)>>>0)};T.prototype.uint64=function G($){var Y=N0.from($);return this._push(u0,Y.length(),Y)};T.prototype.int64=T.prototype.uint64;T.prototype.sint64=function G($){var Y=N0.from($).zzEncode();return this._push(u0,Y.length(),Y)};T.prototype.bool=function G($){return this._push(l0,1,$?1:0)};T.prototype.fixed32=function G($){return this._push(g0,4,$>>>0)};T.prototype.sfixed32=T.prototype.fixed32;T.prototype.fixed64=function G($){var Y=N0.from($);return this._push(g0,4,Y.lo)._push(g0,4,Y.hi)};T.prototype.sfixed64=T.prototype.fixed64;T.prototype.float=function G($){return this._push(B.float.writeFloatLE,4,$)};T.prototype.double=function G($){return this._push(B.float.writeDoubleLE,8,$)};var MY=B.Array.prototype.set?function G($,Y,K){Y.set($,K)}:function G($,Y,K){for(var Q=0;Q<$.length;++Q)Y[K+Q]=$[Q]};T.prototype.bytes=function G($){var Y=$.length>>>0;if(!Y)return this._push(l0,1,0);if(B.isString($)){var K=T.alloc(Y=c$.length($));c$.decode($,K,0),$=K}return this.uint32(Y)._push(MY,Y,$)};T.prototype.string=function G($){var Y=p$.length($);return Y?this.uint32(Y)._push(p$.write,Y,$):this._push(l0,1,0)};T.prototype.fork=function G(){return this.states=new XY(this),this.head=this.tail=new q0(d0,0,0),this.len=0,this};T.prototype.reset=function G(){if(this.states)this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next;else this.head=this.tail=new q0(d0,0,0),this.len=0;return this};T.prototype.ldelim=function G(){var $=this.head,Y=this.tail,K=this.len;if(this.reset().uint32(K),K)this.tail.next=$.next,this.tail=Y,this.len+=K;return this};T.prototype.finish=function G(){var $=this.head.next,Y=this.constructor.alloc(this.len),K=0;while($)$.fn($.val,Y,K),K+=$.len,$=$.next;return Y};T._configure=function(G){b0=G,T.create=f$(),b0._configure()}});var d$=U((rY,g$)=>{var m=function(){b$.call(this)},JY=function(G,$,Y){if(G.length<40)i.utf8.write(G,$,Y);else if($.utf8Write)$.utf8Write(G,Y);else $.write(G,Y)};g$.exports=m;var b$=a0();(m.prototype=Object.create(b$.prototype)).constructor=m;var i=o();m._configure=function(){m.alloc=i._Buffer_allocUnsafe,m.writeBytesBuffer=i.Buffer&&i.Buffer.prototype instanceof Uint8Array&&i.Buffer.prototype.set.name==="set"?function G($,Y,K){Y.set($,K)}:function G($,Y,K){if($.copy)$.copy(Y,K,0,$.length);else for(var Q=0;Q<$.length;)Y[K++]=$[Q++]}};m.prototype.bytes=function G($){if(i.isString($))$=i._Buffer_from($,"base64");var Y=$.length>>>0;if(this.uint32(Y),Y)this._push(m.writeBytesBuffer,Y,$);return this};m.prototype.string=function G($){var Y=i.Buffer.byteLength($);if(this.uint32(Y),Y)this._push(JY,Y,$);return this};m._configure()});var t0=U((sY,o$)=>{var v=function(G,$){return RangeError("index out of range: "+G.pos+" + "+($||1)+" > "+G.len)},I=function(G){this.buf=G,this.pos=0,this.len=G.length},o0=function(){var G=new u$(0,0),$=0;if(this.len-this.pos>4){for(;$<4;++$)if(G.lo=(G.lo|(this.buf[this.pos]&127)<<$*7)>>>0,this.buf[this.pos++]<128)return G;if(G.lo=(G.lo|(this.buf[this.pos]&127)<<28)>>>0,G.hi=(G.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return G;$=0}else{for(;$<3;++$){if(this.pos>=this.len)throw v(this);if(G.lo=(G.lo|(this.buf[this.pos]&127)<<$*7)>>>0,this.buf[this.pos++]<128)return G}return G.lo=(G.lo|(this.buf[this.pos++]&127)<<$*7)>>>0,G}if(this.len-this.pos>4){for(;$<5;++$)if(G.hi=(G.hi|(this.buf[this.pos]&127)<<$*7+3)>>>0,this.buf[this.pos++]<128)return G}else for(;$<5;++$){if(this.pos>=this.len)throw v(this);if(G.hi=(G.hi|(this.buf[this.pos]&127)<<$*7+3)>>>0,this.buf[this.pos++]<128)return G}throw Error("invalid varint encoding")},_0=function(G,$){return(G[$-4]|G[$-3]<<8|G[$-2]<<16|G[$-1]<<24)>>>0},n$=function(){if(this.pos+8>this.len)throw v(this,8);return new u$(_0(this.buf,this.pos+=4),_0(this.buf,this.pos+=4))};o$.exports=I;var h=o(),i0,u$=h.LongBits,qY=h.utf8,l$=typeof Uint8Array!=="undefined"?function G($){if($ instanceof Uint8Array||Array.isArray($))return new I($);throw Error("illegal buffer")}:function G($){if(Array.isArray($))return new I($);throw Error("illegal buffer")},a$=function G(){return h.Buffer?function $(Y){return(I.create=function K(Q){return h.Buffer.isBuffer(Q)?new i0(Q):l$(Q)})(Y)}:l$};I.create=a$();I.prototype._slice=h.Array.prototype.subarray||h.Array.prototype.slice;I.prototype.uint32=function G(){var $=4294967295;return function Y(){if($=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128)return $;if($=($|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)return $;if($=($|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)return $;if($=($|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)return $;if($=($|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128)return $;if((this.pos+=5)>this.len)throw this.pos=this.len,v(this,10);return $}}();I.prototype.int32=function G(){return this.uint32()|0};I.prototype.sint32=function G(){var $=this.uint32();return $>>>1^-($&1)|0};I.prototype.bool=function G(){return this.uint32()!==0};I.prototype.fixed32=function G(){if(this.pos+4>this.len)throw v(this,4);return _0(this.buf,this.pos+=4)};I.prototype.sfixed32=function G(){if(this.pos+4>this.len)throw v(this,4);return _0(this.buf,this.pos+=4)|0};I.prototype.float=function G(){if(this.pos+4>this.len)throw v(this,4);var $=h.float.readFloatLE(this.buf,this.pos);return this.pos+=4,$};I.prototype.double=function G(){if(this.pos+8>this.len)throw v(this,4);var $=h.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,$};I.prototype.bytes=function G(){var $=this.uint32(),Y=this.pos,K=this.pos+$;if(K>this.len)throw v(this,$);if(this.pos+=$,Array.isArray(this.buf))return this.buf.slice(Y,K);if(Y===K){var Q=h.Buffer;return Q?Q.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,Y,K)};I.prototype.string=function G(){var $=this.bytes();return qY.read($,0,$.length)};I.prototype.skip=function G($){if(typeof $==="number"){if(this.pos+$>this.len)throw v(this,$);this.pos+=$}else do if(this.pos>=this.len)throw v(this);while(this.buf[this.pos++]&128);return this};I.prototype.skipType=function(G){switch(G){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:while((G=this.uint32()&7)!==4)this.skipType(G);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+G+" at offset "+this.pos)}return this};I._configure=function(G){i0=G,I.create=a$(),i0._configure();var $=h.Long?"toLong":"toNumber";h.merge(I.prototype,{int64:function Y(){return o0.call(this)[$](!1)},uint64:function Y(){return o0.call(this)[$](!0)},sint64:function Y(){return o0.call(this).zzDecode()[$](!1)},fixed64:function Y(){return n$.call(this)[$](!0)},sfixed64:function Y(){return n$.call(this)[$](!1)}})}});var s$=U((eY,r$)=>{var s=function(G){t$.call(this,G)};r$.exports=s;var t$=t0();(s.prototype=Object.create(t$.prototype)).constructor=s;var i$=o();s._configure=function(){if(i$.Buffer)s.prototype._slice=i$.Buffer.prototype.slice};s.prototype.string=function G(){var $=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+$,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+$,this.len))};s._configure()});var $G=U(($K,e$)=>{var Z0=function(G,$,Y){if(typeof G!=="function")throw TypeError("rpcImpl must be a function");r0.EventEmitter.call(this),this.rpcImpl=G,this.requestDelimited=Boolean($),this.responseDelimited=Boolean(Y)};e$.exports=Z0;var r0=o();(Z0.prototype=Object.create(r0.EventEmitter.prototype)).constructor=Z0;Z0.prototype.rpcCall=function G($,Y,K,Q,X){if(!Q)throw TypeError("request must be specified");var H=this;if(!X)return r0.asPromise(G,H,$,Y,K,Q);if(!H.rpcImpl){setTimeout(function(){X(Error("already ended"))},0);return}try{return H.rpcImpl($,Y[H.requestDelimited?"encodeDelimited":"encode"](Q).finish(),function q(M,J){if(M)return H.emit("error",M,$),X(M);if(J===null){H.end(!0);return}if(!(J instanceof K))try{J=K[H.responseDelimited?"decodeDelimited":"decode"](J)}catch(C){return H.emit("error",C,$),X(C)}return H.emit("data",J,$),X(null,J)})}catch(q){H.emit("error",q,$),setTimeout(function(){X(q)},0);return}};Z0.prototype.end=function G($){if(this.rpcImpl){if(!$)this.rpcImpl(null,null,null);this.rpcImpl=null,this.emit("end").off()}return this}});var YG=U((GG)=>{var ZY=GG;ZY.Service=$G()});var QG=U((YK,KG)=>{KG.exports={}});var MG=U((HG)=>{var XG=function(){P.util._configure(),P.Writer._configure(P.BufferWriter),P.Reader._configure(P.BufferReader)},P=HG;P.build="minimal";P.Writer=a0();P.BufferWriter=d$();P.Reader=t0();P.BufferReader=s$();P.util=o();P.rpc=YG();P.roots=QG();P.configure=XG;XG()});var s0=U((BG)=>{var A0=function(G,$){if(G.nodeType===g.text)return[];return G.childNodes.reduce((Y,K)=>{if(K.nodeType!==g.text&&$(K))return[...Y,K,...A0(K,$)];return[...Y,...A0(K,$)]},[])},SG=function(G,$){for(let Y=0,K=G.childNodes.length;Y<K;Y++){const Q=G.childNodes[Y];if($(Q))return Q;const X=SG(Q,$);if(X)return X}return null},CY=function(G){return G.map(($)=>$.name+($.value?`="${$.value}"`:"")).join(" ")};Object.defineProperty(BG,"__esModule",{value:!0});BG.Node=BG.NodeType=void 0;var g;(function(G){G[G.element=1]="element",G[G.text=3]="text"})(g||(BG.NodeType=g={}));class S0{constructor({nodeType:G,namespace:$,selfCloseTag:Y,text:K,nodeName:Q,childNodes:X,parentNode:H,attributes:q}){this.namespace=$||null,this.nodeType=G,this.isSelfCloseTag=Boolean(Y),this.text=K||null,this.nodeName=G===g.element?Q:"#text",this.childNodes=X||[],this.parentNode=H,this.attributes=q||[]}get firstChild(){return this.childNodes[0]||null}get lastChild(){return this.childNodes[this.childNodes.length-1]||null}get innerHTML(){return this.childNodes.reduce((G,$)=>G+($.nodeType===g.text?$.text:$.outerHTML),"")}get outerHTML(){if(this.nodeType===g.text)return this.textContent;const G=CY(this.attributes),$=`<${this.nodeName}${G.length?" ":""}${G}${this.isSelfCloseTag?"/":""}>`;if(this.isSelfCloseTag)return $;const Y=this.childNodes.map((Q)=>Q.outerHTML).join(""),K=`</${this.nodeName}>`;return[$,Y,K].join("")}get textContent(){if(this.nodeType===g.text)return this.text;return this.childNodes.map((G)=>G.textContent).join("").replace(/\x20+/g," ")}getAttribute(G){const $=this.attributes.find((Y)=>Y.name===G);return $?$.value:null}getElementsByTagName(G){return A0(this,($)=>$.nodeName.toUpperCase()===G.toUpperCase())}getElementsByClassName(G){const $=new RegExp(`^(.*?\\s)?${G}(\\s.*?)?\$`);return A0(this,(Y)=>Boolean(Y.attributes.length&&$.test(Y.getAttribute("class")||"")))}getElementsByName(G){return A0(this,($)=>Boolean($.attributes.length&&$.getAttribute("name")===G))}getElementById(G){return SG(this,($)=>Boolean($.attributes.length&&$.getAttribute("id")===G))}}BG.Node=S0;S0.ELEMENT_NODE=g.element;S0.TEXT_NODE=g.text});var vG=U((jG)=>{Object.defineProperty(jG,"__esModule",{value:!0});jG.NodeAttribute=void 0;class yG{constructor({name:G,value:$}){this.name=G,this.value=$}}jG.NodeAttribute=yG});var e0=U((mG)=>{var RY=function(G,$,Y=!1){const K=EY(G),Q=[];for(let X of K)if(X&&$(X)){if(Q.push(X),Y)return Q}return Q};function*EY(G){const $=PY(G);let Y=null;for(let K=0,Q=$.length;K<Q;K++){const X=$[K];if(Y=LY(X,Y)||Y,xY(Y,X))yield Y,Y=Y.parentNode}while(Y)yield Y,Y=Y.parentNode}var xY=function(G,$){if(!$)return!1;const Y=_Y.test($),[,K]=$.match(pG)||[];return Y&&G.nodeName===K||G.isSelfCloseTag||G.nodeType===C0.NodeType.text},PY=function(G){return G.match(DY)||[]},LY=function(G,$){const Y=OY.test(G),K=WY.test(G);if(Y)return BY(G,$);if(K)return wY(G,$);return null},wY=function(G,$){var Y;const[,K,Q]=G.match(pG)||[],X=NY.test(G)||IY.test(K),H=SY(G),q=new C0.Node({nodeType:C0.NodeType.element,nodeName:K,namespace:Q,attributes:H,childNodes:[],parentNode:$,selfCloseTag:X});return(Y=$===null||$===void 0?void 0:$.childNodes)===null||Y===void 0||Y.push(q),q},SY=function(G){return(G.match(TY)||[]).map(($)=>{cG.lastIndex=0;const Y=cG.exec($)||[],[,K="",Q=""]=Y;return new kY.NodeAttribute({name:K.trim(),value:Q.trim().replace(UY,"")})})},BY=function(G,$){var Y;const K=new C0.Node({nodeType:C0.NodeType.text,nodeName:"#text",text:G,parentNode:$});return(Y=$===null||$===void 0?void 0:$.childNodes)===null||Y===void 0||Y.push(K),K};Object.defineProperty(mG,"__esModule",{value:!0});mG.Dom=void 0;var C0=s0(),kY=vG(),DY=/(<\/?(?:[a-z][a-z0-9]*:)?[a-z][a-z0-9-_.]*?[a-z0-9]*\s*(?:\s+[a-z0-9-_:]+(?:=(?:(?:'[\s\S]*?')|(?:"[\s\S]*?")))?)*\s*\/?>)|([^<]|<(?![a-z/]))*/gi,TY=/\s[a-z0-9-_:]+\b(\s*=\s*('|")[\s\S]*?\2)?/gi,cG=/(\s[a-z0-9-_:]+\b\s*)(?:=(\s*('|")[\s\S]*?\3))?/gi,WY=/^<[a-z]/,NY=/\/>$/,_Y=/^<\//,OY=/^[^<]/,pG=/<\/?((?:([a-z][a-z0-9]*):)?(?:[a-z](?:[a-z0-9-_.]*[a-z0-9])?))/i,UY=/^('|")|('|")$/g,IY=/^(?:area|base|br|col|command|embed|hr|img|input|link|meta|param|source)/i;class fG{constructor(G){this.rawHTML=G}find(G,$){const Y=RY(this.rawHTML,G,$);return $?Y[0]||null:Y}getElementsByClassName(G){const $=new RegExp(`^(.*?\\s)?${G}(\\s.*?)?\$`);return this.find((Y)=>Boolean(Y.attributes.length&&$.test(Y.getAttribute("class")||"")))}getElementsByTagName(G){return this.find(($)=>$.nodeName.toUpperCase()===G.toUpperCase())}getElementById(G){return this.find(($)=>$.getAttribute("id")===G,!0)}getElementsByName(G){return this.find(($)=>$.getAttribute("name")===G)}getElementsByAttribute(G,$){return this.find((Y)=>Y.getAttribute(G)===$)}}mG.Dom=fG});var dG=U((d)=>{var jY=function(G){return new yY.Dom(G)},VY=d&&d.__createBinding||(Object.create?function(G,$,Y,K){if(K===void 0)K=Y;var Q=Object.getOwnPropertyDescriptor($,Y);if(!Q||("get"in Q?!$.__esModule:Q.writable||Q.configurable))Q={enumerable:!0,get:function(){return $[Y]}};Object.defineProperty(G,K,Q)}:function(G,$,Y,K){if(K===void 0)K=Y;G[K]=$[Y]}),gG=d&&d.__exportStar||function(G,$){for(var Y in G)if(Y!=="default"&&!Object.prototype.hasOwnProperty.call($,Y))VY($,G,Y)};Object.defineProperty(d,"__esModule",{value:!0});d.parseFromString=void 0;var yY=e0();d.parseFromString=jY;gG(e0(),d);gG(s0(),d)});var UG={};k0(UG,{streamIntervalToJSON:()=>{{return OG}},streamIntervalFromJSON:()=>{{return _G}},protobufPackage:()=>{{return zY}},YandexSessionResponse:()=>{{return w0}},YandexSessionRequest:()=>{{return L0}},VideoTranslationResponse:()=>{{return U0}},VideoTranslationRequest:()=>{{return O0}},VideoTranslationHelpObject:()=>{{return e}},SubtitlesResponse:()=>{{return R0}},SubtitlesRequest:()=>{{return I0}},SubtitlesObject:()=>{{return $0}},StreamTranslationResponse:()=>{{return x0}},StreamTranslationRequest:()=>{{return E0}},StreamTranslationObject:()=>{{return G0}},StreamPingRequest:()=>{{return P0}},StreamInterval:()=>{{return c}}});var O=function(G,$,Y){this.low=G|0,this.high=$|0,this.unsigned=!!Y},E=function(G){return(G&&G.__isLong__)===!0},Y$=function(G){var $=Math.clz32(G&-G);return G?31-$:$},t=function(G,$){var Y,K,Q;if($){if(G>>>=0,Q=0<=G&&G<256){if(K=Q$[G],K)return K}if(Y=W(G,0,!0),Q)Q$[G]=Y;return Y}else{if(G|=0,Q=-128<=G&&G<128){if(K=K$[G],K)return K}if(Y=W(G,G<0?-1:0,!1),Q)K$[G]=Y;return Y}},S=function(G,$){if(isNaN(G))return $?l:V;if($){if(G<0)return l;if(G>=J$)return z$}else{if(G<=-H$)return x;if(G+1>=H$)return Z$}if(G<0)return S(-G,$).neg();return W(G%K0|0,G/K0|0,$)},W=function(G,$,Y){return new O(G,$,Y)},v0=function(G,$,Y){if(G.length===0)throw Error("empty string");if(typeof $==="number")Y=$,$=!1;else $=!!$;if(G==="NaN"||G==="Infinity"||G==="+Infinity"||G==="-Infinity")return $?l:V;if(Y=Y||10,Y<2||36<Y)throw RangeError("radix");var K;if((K=G.indexOf("-"))>0)throw Error("interior hyphen");else if(K===0)return v0(G.substring(1),$,Y).neg();var Q=S(D0(Y,8)),X=V;for(var H=0;H<G.length;H+=8){var q=Math.min(8,G.length-H),M=parseInt(G.substring(H,H+q),Y);if(q<8){var J=S(D0(Y,q));X=X.mul(J).add(S(M))}else X=X.mul(Q),X=X.add(S(M))}return X.unsigned=$,X},y=function(G,$){if(typeof G==="number")return S(G,$);if(typeof G==="string")return v0(G,$);return W(G.low,G.high,typeof $==="boolean"?$:G.unsigned)},w=null;try{w=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(G){}O.prototype.__isLong__;Object.defineProperty(O.prototype,"__isLong__",{value:!0});O.isLong=E;var K$={},Q$={};O.fromInt=t;O.fromNumber=S;O.fromBits=W;var D0=Math.pow;O.fromString=v0;O.fromValue=y;var X$=1<<16,$Y=1<<24,K0=X$*X$,J$=K0*K0,H$=J$/2,M$=t($Y),V=t(0);O.ZERO=V;var l=t(0,!0);O.UZERO=l;var Y0=t(1);O.ONE=Y0;var q$=t(1,!0);O.UONE=q$;var h0=t(-1);O.NEG_ONE=h0;var Z$=W(4294967295|0,2147483647|0,!1);O.MAX_VALUE=Z$;var z$=W(4294967295|0,4294967295|0,!0);O.MAX_UNSIGNED_VALUE=z$;var x=W(0,2147483648|0,!1);O.MIN_VALUE=x;var Z=O.prototype;Z.toInt=function G(){return this.unsigned?this.low>>>0:this.low};Z.toNumber=function G(){if(this.unsigned)return(this.high>>>0)*K0+(this.low>>>0);return this.high*K0+(this.low>>>0)};Z.toString=function G($){if($=$||10,$<2||36<$)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(x)){var Y=S($),K=this.div(Y),Q=K.mul(Y).sub(this);return K.toString($)+Q.toInt().toString($)}else return"-"+this.neg().toString($);var X=S(D0($,6),this.unsigned),H=this,q="";while(!0){var M=H.div(X),J=H.sub(M.mul(X)).toInt()>>>0,C=J.toString($);if(H=M,H.isZero())return C+q;else{while(C.length<6)C="0"+C;q=""+C+q}}};Z.getHighBits=function G(){return this.high};Z.getHighBitsUnsigned=function G(){return this.high>>>0};Z.getLowBits=function G(){return this.low};Z.getLowBitsUnsigned=function G(){return this.low>>>0};Z.getNumBitsAbs=function G(){if(this.isNegative())return this.eq(x)?64:this.neg().getNumBitsAbs();var $=this.high!=0?this.high:this.low;for(var Y=31;Y>0;Y--)if(($&1<<Y)!=0)break;return this.high!=0?Y+33:Y+1};Z.isZero=function G(){return this.high===0&&this.low===0};Z.eqz=Z.isZero;Z.isNegative=function G(){return!this.unsigned&&this.high<0};Z.isPositive=function G(){return this.unsigned||this.high>=0};Z.isOdd=function G(){return(this.low&1)===1};Z.isEven=function G(){return(this.low&1)===0};Z.equals=function G($){if(!E($))$=y($);if(this.unsigned!==$.unsigned&&this.high>>>31===1&&$.high>>>31===1)return!1;return this.high===$.high&&this.low===$.low};Z.eq=Z.equals;Z.notEquals=function G($){return!this.eq($)};Z.neq=Z.notEquals;Z.ne=Z.notEquals;Z.lessThan=function G($){return this.comp($)<0};Z.lt=Z.lessThan;Z.lessThanOrEqual=function G($){return this.comp($)<=0};Z.lte=Z.lessThanOrEqual;Z.le=Z.lessThanOrEqual;Z.greaterThan=function G($){return this.comp($)>0};Z.gt=Z.greaterThan;Z.greaterThanOrEqual=function G($){return this.comp($)>=0};Z.gte=Z.greaterThanOrEqual;Z.ge=Z.greaterThanOrEqual;Z.compare=function G($){if(!E($))$=y($);if(this.eq($))return 0;var Y=this.isNegative(),K=$.isNegative();if(Y&&!K)return-1;if(!Y&&K)return 1;if(!this.unsigned)return this.sub($).isNegative()?-1:1;return $.high>>>0>this.high>>>0||$.high===this.high&&$.low>>>0>this.low>>>0?-1:1};Z.comp=Z.compare;Z.negate=function G(){if(!this.unsigned&&this.eq(x))return x;return this.not().add(Y0)};Z.neg=Z.negate;Z.add=function G($){if(!E($))$=y($);var Y=this.high>>>16,K=this.high&65535,Q=this.low>>>16,X=this.low&65535,H=$.high>>>16,q=$.high&65535,M=$.low>>>16,J=$.low&65535,C=0,N=0,_=0,L=0;return L+=X+J,_+=L>>>16,L&=65535,_+=Q+M,N+=_>>>16,_&=65535,N+=K+q,C+=N>>>16,N&=65535,C+=Y+H,C&=65535,W(_<<16|L,C<<16|N,this.unsigned)};Z.subtract=function G($){if(!E($))$=y($);return this.add($.neg())};Z.sub=Z.subtract;Z.multiply=function G($){if(this.isZero())return this;if(!E($))$=y($);if(w){var Y=w.mul(this.low,this.high,$.low,$.high);return W(Y,w.get_high(),this.unsigned)}if($.isZero())return this.unsigned?l:V;if(this.eq(x))return $.isOdd()?x:V;if($.eq(x))return this.isOdd()?x:V;if(this.isNegative())if($.isNegative())return this.neg().mul($.neg());else return this.neg().mul($).neg();else if($.isNegative())return this.mul($.neg()).neg();if(this.lt(M$)&&$.lt(M$))return S(this.toNumber()*$.toNumber(),this.unsigned);var K=this.high>>>16,Q=this.high&65535,X=this.low>>>16,H=this.low&65535,q=$.high>>>16,M=$.high&65535,J=$.low>>>16,C=$.low&65535,N=0,_=0,L=0,F0=0;return F0+=H*C,L+=F0>>>16,F0&=65535,L+=X*C,_+=L>>>16,L&=65535,L+=H*J,_+=L>>>16,L&=65535,_+=Q*C,N+=_>>>16,_&=65535,_+=X*J,N+=_>>>16,_&=65535,_+=H*M,N+=_>>>16,_&=65535,N+=K*C+Q*J+X*M+H*q,N&=65535,W(L<<16|F0,N<<16|_,this.unsigned)};Z.mul=Z.multiply;Z.divide=function G($){if(!E($))$=y($);if($.isZero())throw Error("division by zero");if(w){if(!this.unsigned&&this.high===-2147483648&&$.low===-1&&$.high===-1)return this;var Y=(this.unsigned?w.div_u:w.div_s)(this.low,this.high,$.low,$.high);return W(Y,w.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?l:V;var K,Q,X;if(!this.unsigned){if(this.eq(x))if($.eq(Y0)||$.eq(h0))return x;else if($.eq(x))return Y0;else{var H=this.shr(1);if(K=H.div($).shl(1),K.eq(V))return $.isNegative()?Y0:h0;else return Q=this.sub($.mul(K)),X=K.add(Q.div($)),X}else if($.eq(x))return this.unsigned?l:V;if(this.isNegative()){if($.isNegative())return this.neg().div($.neg());return this.neg().div($).neg()}else if($.isNegative())return this.div($.neg()).neg();X=V}else{if(!$.unsigned)$=$.toUnsigned();if($.gt(this))return l;if($.gt(this.shru(1)))return q$;X=l}Q=this;while(Q.gte($)){K=Math.max(1,Math.floor(Q.toNumber()/$.toNumber()));var q=Math.ceil(Math.log(K)/Math.LN2),M=q<=48?1:D0(2,q-48),J=S(K),C=J.mul($);while(C.isNegative()||C.gt(Q))K-=M,J=S(K,this.unsigned),C=J.mul($);if(J.isZero())J=Y0;X=X.add(J),Q=Q.sub(C)}return X};Z.div=Z.divide;Z.modulo=function G($){if(!E($))$=y($);if(w){var Y=(this.unsigned?w.rem_u:w.rem_s)(this.low,this.high,$.low,$.high);return W(Y,w.get_high(),this.unsigned)}return this.sub(this.div($).mul($))};Z.mod=Z.modulo;Z.rem=Z.modulo;Z.not=function G(){return W(~this.low,~this.high,this.unsigned)};Z.countLeadingZeros=function G(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32};Z.clz=Z.countLeadingZeros;Z.countTrailingZeros=function G(){return this.low?Y$(this.low):Y$(this.high)+32};Z.ctz=Z.countTrailingZeros;Z.and=function G($){if(!E($))$=y($);return W(this.low&$.low,this.high&$.high,this.unsigned)};Z.or=function G($){if(!E($))$=y($);return W(this.low|$.low,this.high|$.high,this.unsigned)};Z.xor=function G($){if(!E($))$=y($);return W(this.low^$.low,this.high^$.high,this.unsigned)};Z.shiftLeft=function G($){if(E($))$=$.toInt();if(($&=63)===0)return this;else if($<32)return W(this.low<<$,this.high<<$|this.low>>>32-$,this.unsigned);else return W(0,this.low<<$-32,this.unsigned)};Z.shl=Z.shiftLeft;Z.shiftRight=function G($){if(E($))$=$.toInt();if(($&=63)===0)return this;else if($<32)return W(this.low>>>$|this.high<<32-$,this.high>>$,this.unsigned);else return W(this.high>>$-32,this.high>=0?0:-1,this.unsigned)};Z.shr=Z.shiftRight;Z.shiftRightUnsigned=function G($){if(E($))$=$.toInt();if(($&=63)===0)return this;if($<32)return W(this.low>>>$|this.high<<32-$,this.high>>>$,this.unsigned);if($===32)return W(this.high,0,this.unsigned);return W(this.high>>>$-32,0,this.unsigned)};Z.shru=Z.shiftRightUnsigned;Z.shr_u=Z.shiftRightUnsigned;Z.rotateLeft=function G($){var Y;if(E($))$=$.toInt();if(($&=63)===0)return this;if($===32)return W(this.high,this.low,this.unsigned);if($<32)return Y=32-$,W(this.low<<$|this.high>>>Y,this.high<<$|this.low>>>Y,this.unsigned);return $-=32,Y=32-$,W(this.high<<$|this.low>>>Y,this.low<<$|this.high>>>Y,this.unsigned)};Z.rotl=Z.rotateLeft;Z.rotateRight=function G($){var Y;if(E($))$=$.toInt();if(($&=63)===0)return this;if($===32)return W(this.high,this.low,this.unsigned);if($<32)return Y=32-$,W(this.high<<Y|this.low>>>$,this.low<<Y|this.high>>>$,this.unsigned);return $-=32,Y=32-$,W(this.low<<Y|this.high>>>$,this.high<<Y|this.low>>>$,this.unsigned)};Z.rotr=Z.rotateRight;Z.toSigned=function G(){if(!this.unsigned)return this;return W(this.low,this.high,!1)};Z.toUnsigned=function G(){if(this.unsigned)return this;return W(this.low,this.high,!0)};Z.toBytes=function G($){return $?this.toBytesLE():this.toBytesBE()};Z.toBytesLE=function G(){var $=this.high,Y=this.low;return[Y&255,Y>>>8&255,Y>>>16&255,Y>>>24,$&255,$>>>8&255,$>>>16&255,$>>>24]};Z.toBytesBE=function G(){var $=this.high,Y=this.low;return[$>>>24,$>>>16&255,$>>>8&255,$&255,Y>>>24,Y>>>16&255,Y>>>8&255,Y&255]};O.fromBytes=function G($,Y,K){return K?O.fromBytesLE($,Y):O.fromBytesBE($,Y)};O.fromBytesLE=function G($,Y){return new O($[0]|$[1]<<8|$[2]<<16|$[3]<<24,$[4]|$[5]<<8|$[6]<<16|$[7]<<24,Y)};O.fromBytesBE=function G($,Y){return new O($[4]<<24|$[5]<<16|$[6]<<8|$[7],$[0]<<24|$[1]<<16|$[2]<<8|$[3],Y)};var c0=O;var D=G$(MG(),1);function _G(G){switch(G){case 0:case"NO_CONNECTION":return c.NO_CONNECTION;case 10:case"TRANSLATING":return c.TRANSLATING;case 20:case"STREAMING":return c.STREAMING;case-1:case"UNRECOGNIZED":default:return c.UNRECOGNIZED}}function OG(G){switch(G){case c.NO_CONNECTION:return"NO_CONNECTION";case c.TRANSLATING:return"TRANSLATING";case c.STREAMING:return"STREAMING";case c.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var JG=function(){return{target:"",targetUrl:""}},qG=function(){return{url:"",deviceId:void 0,firstRequest:!1,duration:0,unknown0:0,language:"",forceSourceLang:!1,unknown1:0,translationHelp:[],responseLanguage:"",unknown2:0,unknown3:0,bypassCache:!1}},ZG=function(){return{url:void 0,duration:void 0,status:0,remainingTime:void 0,unknown0:void 0,translationId:"",language:void 0,message:void 0}},zG=function(){return{language:"",url:"",unknown0:0,translatedLanguages:"",translatedUrl:"",unknown1:0,unknown2:0}},AG=function(){return{url:"",language:""}},CG=function(){return{waiting:!1,subtitles:[]}},FG=function(){return{url:"",timestamp:0}},kG=function(){return{url:"",language:"",responseLanguage:""}},DG=function(){return{interval:0,translatedInfo:void 0,pingId:void 0}},TG=function(){return{pingId:0}},WG=function(){return{uuid:"",module:""}},NG=function(){return{sign:"",expires:0}},AY=function(G){if(G.gt(globalThis.Number.MAX_SAFE_INTEGER))throw new globalThis.Error("Value is larger than Number.MAX_SAFE_INTEGER");return G.toNumber()},k=function(G){return G!==null&&G!==void 0},zY="",c;(function(Q){Q[Q["NO_CONNECTION"]=0]="NO_CONNECTION";Q[Q["TRANSLATING"]=10]="TRANSLATING";Q[Q["STREAMING"]=20]="STREAMING";Q[Q["UNRECOGNIZED"]=-1]="UNRECOGNIZED"})(c||(c={}));var e={encode(G,$=D.default.Writer.create()){if(G.target!=="")$.uint32(10).string(G.target);if(G.targetUrl!=="")$.uint32(18).string(G.targetUrl);return $},decode(G,$){const Y=G instanceof D.default.Reader?G:D.default.Reader.create(G);let K=$===void 0?Y.len:Y.pos+$;const Q=JG();while(Y.pos<K){const X=Y.uint32();switch(X>>>3){case 1:if(X!==10)break;Q.target=Y.string();continue;case 2:if(X!==18)break;Q.targetUrl=Y.string();continue}if((X&7)===4||X===0)break;Y.skipType(X&7)}return Q},fromJSON(G){return{target:k(G.target)?globalThis.String(G.target):"",targetUrl:k(G.targetUrl)?globalThis.String(G.targetUrl):""}},toJSON(G){const $={};if(G.target!=="")$.target=G.target;if(G.targetUrl!=="")$.targetUrl=G.targetUrl;return $},create(G){return e.fromPartial(G??{})},fromPartial(G){const $=JG();return $.target=G.target??"",$.targetUrl=G.targetUrl??"",$}},O0={encode(G,$=D.default.Writer.create()){if(G.url!=="")$.uint32(26).string(G.url);if(G.deviceId!==void 0)$.uint32(34).string(G.deviceId);if(G.firstRequest!==!1)$.uint32(40).bool(G.firstRequest);if(G.duration!==0)$.uint32(49).double(G.duration);if(G.unknown0!==0)$.uint32(56).int32(G.unknown0);if(G.language!=="")$.uint32(66).string(G.language);if(G.forceSourceLang!==!1)$.uint32(72).bool(G.forceSourceLang);if(G.unknown1!==0)$.uint32(80).int32(G.unknown1);for(let Y of G.translationHelp)e.encode(Y,$.uint32(90).fork()).ldelim();if(G.responseLanguage!=="")$.uint32(114).string(G.responseLanguage);if(G.unknown2!==0)$.uint32(120).int32(G.unknown2);if(G.unknown3!==0)$.uint32(128).int32(G.unknown3);if(G.bypassCache!==!1)$.uint32(136).bool(G.bypassCache);return $},decode(G,$){const Y=G instanceof D.default.Reader?G:D.default.Reader.create(G);let K=$===void 0?Y.len:Y.pos+$;const Q=qG();while(Y.pos<K){const X=Y.uint32();switch(X>>>3){case 3:if(X!==26)break;Q.url=Y.string();continue;case 4:if(X!==34)break;Q.deviceId=Y.string();continue;case 5:if(X!==40)break;Q.firstRequest=Y.bool();continue;case 6:if(X!==49)break;Q.duration=Y.double();continue;case 7:if(X!==56)break;Q.unknown0=Y.int32();continue;case 8:if(X!==66)break;Q.language=Y.string();continue;case 9:if(X!==72)break;Q.forceSourceLang=Y.bool();continue;case 10:if(X!==80)break;Q.unknown1=Y.int32();continue;case 11:if(X!==90)break;Q.translationHelp.push(e.decode(Y,Y.uint32()));continue;case 14:if(X!==114)break;Q.responseLanguage=Y.string();continue;case 15:if(X!==120)break;Q.unknown2=Y.int32();continue;case 16:if(X!==128)break;Q.unknown3=Y.int32();continue;case 17:if(X!==136)break;Q.bypassCache=Y.bool();continue}if((X&7)===4||X===0)break;Y.skipType(X&7)}return Q},fromJSON(G){return{url:k(G.url)?globalThis.String(G.url):"",deviceId:k(G.deviceId)?globalThis.String(G.deviceId):void 0,firstRequest:k(G.firstRequest)?globalThis.Boolean(G.firstRequest):!1,duration:k(G.duration)?globalThis.Number(G.duration):0,unknown0:k(G.unknown0)?globalThis.Number(G.unknown0):0,language:k(G.language)?globalThis.String(G.language):"",forceSourceLang:k(G.forceSourceLang)?globalThis.Boolean(G.forceSourceLang):!1,unknown1:k(G.unknown1)?globalThis.Number(G.unknown1):0,translationHelp:globalThis.Array.isArray(G?.translationHelp)?G.translationHelp.map(($)=>e.fromJSON($)):[],responseLanguage:k(G.responseLanguage)?globalThis.String(G.responseLanguage):"",unknown2:k(G.unknown2)?globalThis.Number(G.unknown2):0,unknown3:k(G.unknown3)?globalThis.Number(G.unknown3):0,bypassCache:k(G.bypassCache)?globalThis.Boolean(G.bypassCache):!1}},toJSON(G){const $={};if(G.url!=="")$.url=G.url;if(G.deviceId!==void 0)$.deviceId=G.deviceId;if(G.firstRequest!==!1)$.firstRequest=G.firstRequest;if(G.duration!==0)$.duration=G.duration;if(G.unknown0!==0)$.unknown0=Math.round(G.unknown0);if(G.language!=="")$.language=G.language;if(G.forceSourceLang!==!1)$.forceSourceLang=G.forceSourceLang;if(G.unknown1!==0)$.unknown1=Math.round(G.unknown1);if(G.translationHelp?.length)$.translationHelp=G.translationHelp.map((Y)=>e.toJSON(Y));if(G.responseLanguage!=="")$.responseLanguage=G.responseLanguage;if(G.unknown2!==0)$.unknown2=Math.round(G.unknown2);if(G.unknown3!==0)$.unknown3=Math.round(G.unknown3);if(G.bypassCache!==!1)$.bypassCache=G.bypassCache;return $},create(G){return O0.fromPartial(G??{})},fromPartial(G){const $=qG();return $.url=G.url??"",$.deviceId=G.deviceId??void 0,$.firstRequest=G.firstRequest??!1,$.duration=G.duration??0,$.unknown0=G.unknown0??0,$.language=G.language??"",$.forceSourceLang=G.forceSourceLang??!1,$.unknown1=G.unknown1??0,$.translationHelp=G.translationHelp?.map((Y)=>e.fromPartial(Y))||[],$.responseLanguage=G.responseLanguage??"",$.unknown2=G.unknown2??0,$.unknown3=G.unknown3??0,$.bypassCache=G.bypassCache??!1,$}},U0={encode(G,$=D.default.Writer.create()){if(G.url!==void 0)$.uint32(10).string(G.url);if(G.duration!==void 0)$.uint32(17).double(G.duration);if(G.status!==0)$.uint32(32).int32(G.status);if(G.remainingTime!==void 0)$.uint32(40).int32(G.remainingTime);if(G.unknown0!==void 0)$.uint32(48).int32(G.unknown0);if(G.translationId!=="")$.uint32(58).string(G.translationId);if(G.language!==void 0)$.uint32(66).string(G.language);if(G.message!==void 0)$.uint32(74).string(G.message);return $},decode(G,$){const Y=G instanceof D.default.Reader?G:D.default.Reader.create(G);let K=$===void 0?Y.len:Y.pos+$;const Q=ZG();while(Y.pos<K){const X=Y.uint32();switch(X>>>3){case 1:if(X!==10)break;Q.url=Y.string();continue;case 2:if(X!==17)break;Q.duration=Y.double();continue;case 4:if(X!==32)break;Q.status=Y.int32();continue;case 5:if(X!==40)break;Q.remainingTime=Y.int32();continue;case 6:if(X!==48)break;Q.unknown0=Y.int32();continue;case 7:if(X!==58)break;Q.translationId=Y.string();continue;case 8:if(X!==66)break;Q.language=Y.string();continue;case 9:if(X!==74)break;Q.message=Y.string();continue}if((X&7)===4||X===0)break;Y.skipType(X&7)}return Q},fromJSON(G){return{url:k(G.url)?globalThis.String(G.url):void 0,duration:k(G.duration)?globalThis.Number(G.duration):void 0,status:k(G.status)?globalThis.Number(G.status):0,remainingTime:k(G.remainingTime)?globalThis.Number(G.remainingTime):void 0,unknown0:k(G.unknown0)?globalThis.Number(G.unknown0):void 0,translationId:k(G.translationId)?globalThis.String(G.translationId):"",language:k(G.language)?globalThis.String(G.language):void 0,message:k(G.message)?globalThis.String(G.message):void 0}},toJSON(G){const $={};if(G.url!==void 0)$.url=G.url;if(G.duration!==void 0)$.duration=G.duration;if(G.status!==0)$.status=Math.round(G.status);if(G.remainingTime!==void 0)$.remainingTime=Math.round(G.remainingTime);if(G.unknown0!==void 0)$.unknown0=Math.round(G.unknown0);if(G.translationId!=="")$.translationId=G.translationId;if(G.language!==void 0)$.language=G.language;if(G.message!==void 0)$.message=G.message;return $},create(G){return U0.fromPartial(G??{})},fromPartial(G){const $=ZG();return $.url=G.url??void 0,$.duration=G.duration??void 0,$.status=G.status??0,$.remainingTime=G.remainingTime??void 0,$.unknown0=G.unknown0??void 0,$.translationId=G.translationId??"",$.language=G.language??void 0,$.message=G.message??void 0,$}},$0={encode(G,$=D.default.Writer.create()){if(G.language!=="")$.uint32(10).string(G.language);if(G.url!=="")$.uint32(18).string(G.url);if(G.unknown0!==0)$.uint32(24).int32(G.unknown0);if(G.translatedLanguages!=="")$.uint32(34).string(G.translatedLanguages);if(G.translatedUrl!=="")$.uint32(42).string(G.translatedUrl);if(G.unknown1!==0)$.uint32(48).int32(G.unknown1);if(G.unknown2!==0)$.uint32(56).int32(G.unknown2);return $},decode(G,$){const Y=G instanceof D.default.Reader?G:D.default.Reader.create(G);let K=$===void 0?Y.len:Y.pos+$;const Q=zG();while(Y.pos<K){const X=Y.uint32();switch(X>>>3){case 1:if(X!==10)break;Q.language=Y.string();continue;case 2:if(X!==18)break;Q.url=Y.string();continue;case 3:if(X!==24)break;Q.unknown0=Y.int32();continue;case 4:if(X!==34)break;Q.translatedLanguages=Y.string();continue;case 5:if(X!==42)break;Q.translatedUrl=Y.string();continue;case 6:if(X!==48)break;Q.unknown1=Y.int32();continue;case 7:if(X!==56)break;Q.unknown2=Y.int32();continue}if((X&7)===4||X===0)break;Y.skipType(X&7)}return Q},fromJSON(G){return{language:k(G.language)?globalThis.String(G.language):"",url:k(G.url)?globalThis.String(G.url):"",unknown0:k(G.unknown0)?globalThis.Number(G.unknown0):0,translatedLanguages:k(G.translatedLanguages)?globalThis.String(G.translatedLanguages):"",translatedUrl:k(G.translatedUrl)?globalThis.String(G.translatedUrl):"",unknown1:k(G.unknown1)?globalThis.Number(G.unknown1):0,unknown2:k(G.unknown2)?globalThis.Number(G.unknown2):0}},toJSON(G){const $={};if(G.language!=="")$.language=G.language;if(G.url!=="")$.url=G.url;if(G.unknown0!==0)$.unknown0=Math.round(G.unknown0);if(G.translatedLanguages!=="")$.translatedLanguages=G.translatedLanguages;if(G.translatedUrl!=="")$.translatedUrl=G.translatedUrl;if(G.unknown1!==0)$.unknown1=Math.round(G.unknown1);if(G.unknown2!==0)$.unknown2=Math.round(G.unknown2);return $},create(G){return $0.fromPartial(G??{})},fromPartial(G){const $=zG();return $.language=G.language??"",$.url=G.url??"",$.unknown0=G.unknown0??0,$.translatedLanguages=G.translatedLanguages??"",$.translatedUrl=G.translatedUrl??"",$.unknown1=G.unknown1??0,$.unknown2=G.unknown2??0,$}},I0={encode(G,$=D.default.Writer.create()){if(G.url!=="")$.uint32(10).string(G.url);if(G.language!=="")$.uint32(18).string(G.language);return $},decode(G,$){const Y=G instanceof D.default.Reader?G:D.default.Reader.create(G);let K=$===void 0?Y.len:Y.pos+$;const Q=AG();while(Y.pos<K){const X=Y.uint32();switch(X>>>3){case 1:if(X!==10)break;Q.url=Y.string();continue;case 2:if(X!==18)break;Q.language=Y.string();continue}if((X&7)===4||X===0)break;Y.skipType(X&7)}return Q},fromJSON(G){return{url:k(G.url)?globalThis.String(G.url):"",language:k(G.language)?globalThis.String(G.language):""}},toJSON(G){const $={};if(G.url!=="")$.url=G.url;if(G.language!=="")$.language=G.language;return $},create(G){return I0.fromPartial(G??{})},fromPartial(G){const $=AG();return $.url=G.url??"",$.language=G.language??"",$}},R0={encode(G,$=D.default.Writer.create()){if(G.waiting!==!1)$.uint32(8).bool(G.waiting);for(let Y of G.subtitles)$0.encode(Y,$.uint32(18).fork()).ldelim();return $},decode(G,$){const Y=G instanceof D.default.Reader?G:D.default.Reader.create(G);let K=$===void 0?Y.len:Y.pos+$;const Q=CG();while(Y.pos<K){const X=Y.uint32();switch(X>>>3){case 1:if(X!==8)break;Q.waiting=Y.bool();continue;case 2:if(X!==18)break;Q.subtitles.push($0.decode(Y,Y.uint32()));continue}if((X&7)===4||X===0)break;Y.skipType(X&7)}return Q},fromJSON(G){return{waiting:k(G.waiting)?globalThis.Boolean(G.waiting):!1,subtitles:globalThis.Array.isArray(G?.subtitles)?G.subtitles.map(($)=>$0.fromJSON($)):[]}},toJSON(G){const $={};if(G.waiting!==!1)$.waiting=G.waiting;if(G.subtitles?.length)$.subtitles=G.subtitles.map((Y)=>$0.toJSON(Y));return $},create(G){return R0.fromPartial(G??{})},fromPartial(G){const $=CG();return $.waiting=G.waiting??!1,$.subtitles=G.subtitles?.map((Y)=>$0.fromPartial(Y))||[],$}},G0={encode(G,$=D.default.Writer.create()){if(G.url!=="")$.uint32(10).string(G.url);if(G.timestamp!==0)$.uint32(16).int64(G.timestamp);return $},decode(G,$){const Y=G instanceof D.default.Reader?G:D.default.Reader.create(G);let K=$===void 0?Y.len:Y.pos+$;const Q=FG();while(Y.pos<K){const X=Y.uint32();switch(X>>>3){case 1:if(X!==10)break;Q.url=Y.string();continue;case 2:if(X!==16)break;Q.timestamp=AY(Y.int64());continue}if((X&7)===4||X===0)break;Y.skipType(X&7)}return Q},fromJSON(G){return{url:k(G.url)?globalThis.String(G.url):"",timestamp:k(G.timestamp)?globalThis.Number(G.timestamp):0}},toJSON(G){const $={};if(G.url!=="")$.url=G.url;if(G.timestamp!==0)$.timestamp=Math.round(G.timestamp);return $},create(G){return G0.fromPartial(G??{})},fromPartial(G){const $=FG();return $.url=G.url??"",$.timestamp=G.timestamp??0,$}},E0={encode(G,$=D.default.Writer.create()){if(G.url!=="")$.uint32(10).string(G.url);if(G.language!=="")$.uint32(18).string(G.language);if(G.responseLanguage!=="")$.uint32(26).string(G.responseLanguage);return $},decode(G,$){const Y=G instanceof D.default.Reader?G:D.default.Reader.create(G);let K=$===void 0?Y.len:Y.pos+$;const Q=kG();while(Y.pos<K){const X=Y.uint32();switch(X>>>3){case 1:if(X!==10)break;Q.url=Y.string();continue;case 2:if(X!==18)break;Q.language=Y.string();continue;case 3:if(X!==26)break;Q.responseLanguage=Y.string();continue}if((X&7)===4||X===0)break;Y.skipType(X&7)}return Q},fromJSON(G){return{url:k(G.url)?globalThis.String(G.url):"",language:k(G.language)?globalThis.String(G.language):"",responseLanguage:k(G.responseLanguage)?globalThis.String(G.responseLanguage):""}},toJSON(G){const $={};if(G.url!=="")$.url=G.url;if(G.language!=="")$.language=G.language;if(G.responseLanguage!=="")$.responseLanguage=G.responseLanguage;return $},create(G){return E0.fromPartial(G??{})},fromPartial(G){const $=kG();return $.url=G.url??"",$.language=G.language??"",$.responseLanguage=G.responseLanguage??"",$}},x0={encode(G,$=D.default.Writer.create()){if(G.interval!==0)$.uint32(8).int32(G.interval);if(G.translatedInfo!==void 0)G0.encode(G.translatedInfo,$.uint32(18).fork()).ldelim();if(G.pingId!==void 0)$.uint32(24).int32(G.pingId);return $},decode(G,$){const Y=G instanceof D.default.Reader?G:D.default.Reader.create(G);let K=$===void 0?Y.len:Y.pos+$;const Q=DG();while(Y.pos<K){const X=Y.uint32();switch(X>>>3){case 1:if(X!==8)break;Q.interval=Y.int32();continue;case 2:if(X!==18)break;Q.translatedInfo=G0.decode(Y,Y.uint32());continue;case 3:if(X!==24)break;Q.pingId=Y.int32();continue}if((X&7)===4||X===0)break;Y.skipType(X&7)}return Q},fromJSON(G){return{interval:k(G.interval)?_G(G.interval):0,translatedInfo:k(G.translatedInfo)?G0.fromJSON(G.translatedInfo):void 0,pingId:k(G.pingId)?globalThis.Number(G.pingId):void 0}},toJSON(G){const $={};if(G.interval!==0)$.interval=OG(G.interval);if(G.translatedInfo!==void 0)$.translatedInfo=G0.toJSON(G.translatedInfo);if(G.pingId!==void 0)$.pingId=Math.round(G.pingId);return $},create(G){return x0.fromPartial(G??{})},fromPartial(G){const $=DG();return $.interval=G.interval??0,$.translatedInfo=G.translatedInfo!==void 0&&G.translatedInfo!==null?G0.fromPartial(G.translatedInfo):void 0,$.pingId=G.pingId??void 0,$}},P0={encode(G,$=D.default.Writer.create()){if(G.pingId!==0)$.uint32(8).int32(G.pingId);return $},decode(G,$){const Y=G instanceof D.default.Reader?G:D.default.Reader.create(G);let K=$===void 0?Y.len:Y.pos+$;const Q=TG();while(Y.pos<K){const X=Y.uint32();switch(X>>>3){case 1:if(X!==8)break;Q.pingId=Y.int32();continue}if((X&7)===4||X===0)break;Y.skipType(X&7)}return Q},fromJSON(G){return{pingId:k(G.pingId)?globalThis.Number(G.pingId):0}},toJSON(G){const $={};if(G.pingId!==0)$.pingId=Math.round(G.pingId);return $},create(G){return P0.fromPartial(G??{})},fromPartial(G){const $=TG();return $.pingId=G.pingId??0,$}},L0={encode(G,$=D.default.Writer.create()){if(G.uuid!=="")$.uint32(10).string(G.uuid);if(G.module!=="")$.uint32(18).string(G.module);return $},decode(G,$){const Y=G instanceof D.default.Reader?G:D.default.Reader.create(G);let K=$===void 0?Y.len:Y.pos+$;const Q=WG();while(Y.pos<K){const X=Y.uint32();switch(X>>>3){case 1:if(X!==10)break;Q.uuid=Y.string();continue;case 2:if(X!==18)break;Q.module=Y.string();continue}if((X&7)===4||X===0)break;Y.skipType(X&7)}return Q},fromJSON(G){return{uuid:k(G.uuid)?globalThis.String(G.uuid):"",module:k(G.module)?globalThis.String(G.module):""}},toJSON(G){const $={};if(G.uuid!=="")$.uuid=G.uuid;if(G.module!=="")$.module=G.module;return $},create(G){return L0.fromPartial(G??{})},fromPartial(G){const $=WG();return $.uuid=G.uuid??"",$.module=G.module??"",$}},w0={encode(G,$=D.default.Writer.create()){if(G.sign!=="")$.uint32(10).string(G.sign);if(G.expires!==0)$.uint32(16).int32(G.expires);return $},decode(G,$){const Y=G instanceof D.default.Reader?G:D.default.Reader.create(G);let K=$===void 0?Y.len:Y.pos+$;const Q=NG();while(Y.pos<K){const X=Y.uint32();switch(X>>>3){case 1:if(X!==10)break;Q.sign=Y.string();continue;case 2:if(X!==16)break;Q.expires=Y.int32();continue}if((X&7)===4||X===0)break;Y.skipType(X&7)}return Q},fromJSON(G){return{sign:k(G.sign)?globalThis.String(G.sign):"",expires:k(G.expires)?globalThis.Number(G.expires):0}},toJSON(G){const $={};if(G.sign!=="")$.sign=G.sign;if(G.expires!==0)$.expires=Math.round(G.expires);return $},create(G){return w0.fromPartial(G??{})},fromPartial(G){const $=NG();return $.sign=G.sign??"",$.expires=G.expires??0,$}};if(D.default.util.Long!==c0)D.default.util.Long=c0,D.default.configure();var n={encodeTranslationRequest(G,$,Y,K,Q){return O0.encode({url:G,firstRequest:!0,duration:$,unknown0:1,language:Y,forceSourceLang:!1,unknown1:0,translationHelp:Q?Q:[],responseLanguage:K,unknown2:0,unknown3:1,bypassCache:!0}).finish()},decodeTranslationResponse(G){return U0.decode(new Uint8Array(G))},encodeSubtitlesRequest(G,$){return I0.encode({url:G,language:$}).finish()},decodeSubtitlesResponse(G){return R0.decode(new Uint8Array(G))},encodeStreamPingRequest(G){return P0.encode({pingId:G}).finish()},encodeStreamRequest(G,$,Y){return E0.encode({url:G,language:$,responseLanguage:Y}).finish()},decodeStreamResponse(G){return x0.decode(new Uint8Array(G))},encodeYandexSessionRequest(G,$){return L0.encode({uuid:G,module:$}).finish()},decodeYandexSessionResponse(G){return w0.decode(new Uint8Array(G))}};var p={host:"api.browser.yandex.ru",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 YaBrowser/24.4.0.0 Safari/537.36",hmac:"bt8xH3VOlb4mqf0nqAibnDOoiPlXsisf",defaultDuration:343};import z0 from"node:crypto";async function X0(G){const $=new TextEncoder,Y=await z0.subtle.importKey("raw",$.encode(p.hmac),{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign","verify"]),K=await z0.subtle.sign("HMAC",Y,G);return new Uint8Array(K).reduce((Q,X)=>Q+X.toString(16).padStart(2,"0"),"")}function H0(G){const $=z0.getRandomValues(new Uint8Array(31));let Y=0;const K=([1e7]+1000+4000+8000+100000000000).replace(/[018]/g,(Q)=>(Q^$[Y++]&15>>Q/4).toString(16));return G?K:K.toUpperCase()}async function IG(G,$){try{const Y=new TextEncoder;let K=Y.encode($);const Q=await z0.subtle.importKey("raw",Y.encode(G),{name:"HMAC",hash:{name:"SHA-1"}},!1,["sign","verify"]),X=await z0.subtle.sign("HMAC",Q,K);return btoa(String.fromCharCode(...new Uint8Array(X)))}catch(Y){return console.error(Y),!1}}var RG={};k0(RG,{VideoTranslationStatus:()=>{{return b}},VideoService:()=>{{return z}}});var z;(function(A){A["custom"]="custom";A[A["directlink"]=A.custom]="directlink";A["youtube"]="youtube";A["piped"]="piped";A["invidious"]="invidious";A["vk"]="vk";A["nine_gag"]="nine_gag";A[A["gag"]=A.nine_gag]="gag";A["twitch"]="twitch";A["proxitok"]="proxitok";A["tiktok"]="tiktok";A["vimeo"]="vimeo";A["xvideos"]="xvideos";A["pornhub"]="pornhub";A["twitter"]="twitter";A["rumble"]="rumble";A["facebook"]="facebook";A["rutube"]="rutube";A["coub"]="coub";A["bilibili"]="bilibili";A["mail_ru"]="mailru";A[A["mailru"]=A.mail_ru]="mailru";A["bitchute"]="bitchute";A["eporner"]="eporner";A["peertube"]="peertube";A["dailymotion"]="dailymotion";A["trovo"]="trovo";A["yandexdisk"]="yandexdisk";A["ok_ru"]="okru";A[A["okru"]=A.ok_ru]="okru";A["googledrive"]="googledrive";A["bannedvideo"]="bannedvideo";A["weverse"]="weverse";A["newgrounds"]="newgrounds";A["egghead"]="egghead";A["youku"]="youku";A["kodik"]="kodik";A["patreon"]="patreon"})(z||(z={}));var b;(function(H){H[H["FAILED"]=0]="FAILED";H[H["FINISHED"]=1]="FINISHED";H[H["WAITING"]=2]="WAITING";H[H["LONG_WAITING"]=3]="LONG_WAITING";H[H["PART_CONTENT"]=5]="PART_CONTENT";H[H["LONG_WAITING_2"]=6]="LONG_WAITING_2"})(b||(b={}));var oG={};k0(oG,{getVideoID:()=>{{return aG}},getVideoData:()=>{{return $$}},getService:()=>{{return uG}}});var EG=["invidious.snopyta.org","yewtu.be","invidious.kavin.rocks","vid.puffyan.us","invidious.namazso.eu","inv.riverside.rocks","yt.artemislena.eu","invidious.flokinet.to","invidious.esmailelbob.xyz","y.com.sb","invidious.nerdvpn.de","inv.vern.cc","invidious.slipfox.xyz","invidio.xamh.de","invidious.dhusch.de"],xG=["piped.video","piped.tokhmi.xyz","piped.moomoo.me","piped.syncpundit.io","piped.mha.fi","watch.whatever.social","piped.garudalinux.org","efy.piped.pages.dev","watch.leptons.xyz","piped.lunar.icu","yt.dc09.ru","piped.mint.lgbt","il.ax","piped.privacy.com.de","piped.esmailelbob.xyz","piped.projectsegfau.lt","piped.in.projectsegfau.lt","piped.us.projectsegfau.lt","piped.privacydev.net","piped.palveluntarjoaja.eu","piped.smnz.de","piped.adminforge.de","piped.qdi.fi","piped.hostux.net","piped.chauvet.pro","piped.jotoma.de","piped.pfcd.me","piped.frontendfriendly.xyz"],PG=["proxitok.pabloferreiro.es","proxitok.pussthecat.org","tok.habedieeh.re","proxitok.esmailelbob.xyz","proxitok.privacydev.net","tok.artemislena.eu","tok.adminforge.de","tik.hostux.net","tt.vern.cc","cringe.whatever.social","proxitok.lunar.icu","proxitok.privacy.com.de"],LG=["peertube.1312.media","tube.shanti.cafe","bee-tube.fr","video.sadmin.io","dalek.zone","review.peertube.biz","peervideo.club","tube.la-dina.net","peertube.tmp.rcp.tf","peertube.su"];var wG=[{host:z.youtube,url:"https://youtu.be/",match:/^((www.|m.)?youtube(-nocookie|kids)?.com)|(youtu.be)$/},{host:z.invidious,url:"https://youtu.be/",match:EG},{host:z.piped,url:"https://youtu.be/",match:xG},{host:z.vk,url:"https://vk.com/video?z=",match:/^(www.|m.)?vk.(com|ru)$/},{host:z.nine_gag,url:"https://9gag.com/gag/",match:/^9gag.com$/},{host:z.twitch,url:"https://twitch.tv/",match:[/^m.twitch.tv$/,/^(www.)?twitch.tv$/,/^clips.twitch.tv$/,/^player.twitch.tv$/]},{host:z.proxitok,url:"https://www.tiktok.com/",match:PG},{host:z.tiktok,url:"https://www.tiktok.com/",match:/^(www.)?tiktok.com$/},{host:z.vimeo,url:"https://vimeo.com/",match:/^vimeo.com$/},{host:z.vimeo,url:"https://player.vimeo.com/",match:/^player.vimeo.com$/},{host:z.xvideos,url:"https://www.xvideos.com/",match:/^(www.)?xvideos.com$/},{host:z.pornhub,url:"https://rt.pornhub.com/view_video.php?viewkey=",match:/^[a-z]+.pornhub.com$/},{host:z.twitter,url:"https://twitter.com/i/status/",match:/^twitter.com$/},{host:z.rumble,url:"https://rumble.com/",match:/^rumble.com$/},{host:z.facebook,url:"https://facebook.com/",match:(G)=>G.host.includes("facebook.com")&&(G.pathname.includes("/videos/")||G.pathname.includes("/reel/"))},{host:z.rutube,url:"https://rutube.ru/video/",match:/^rutube.ru$/},{host:z.bilibili,url:"https://www.bilibili.com/video/",match:/^(www|m|player).bilibili.com$/},{host:z.mailru,url:"https://my.mail.ru/",match:/^my.mail.ru$/},{host:z.bitchute,url:"https://www.bitchute.com/video/",match:/^(www.)?bitchute.com$/},{host:z.eporner,url:"https://www.eporner.com/",match:/^(www.)?eporner.com$/},{host:z.peertube,url:"stub",match:LG},{host:z.dailymotion,url:"https://dai.ly/",match:/^(www.)?dailymotion.com|dai.ly$/},{host:z.trovo,url:"https://trovo.live/s/",match:/^trovo.live$/},{host:z.yandexdisk,url:"https://yadi.sk/i/",match:/^disk.yandex.ru|yadi.sk$/},{host:z.okru,url:"https://ok.ru/video/",match:/^ok.ru$/},{host:z.googledrive,url:"https://drive.google.com/file/d/",match:/^drive.google.com$/},{host:z.bannedvideo,url:"https://madmaxworld.tv/watch?id=",match:/^(www.)?banned.video|madmaxworld.tv$/},{host:z.weverse,url:"https://weverse.io/",match:/^weverse.io$/},{host:z.newgrounds,url:"https://www.newgrounds.com/",match:/^(www.)?newgrounds.com$/},{host:z.egghead,url:"https://egghead.io/",match:/^egghead.io$/},{host:z.youku,url:"https://v.youku.com/",match:/^v.youku.com$/},{host:z.kodik,url:"stub",match:/^kodik.(info|biz|cc)$/},{host:z.patreon,url:"stub",match:/^(www.)?patreon.com$/},{host:z.custom,url:"stub",match:(G)=>/([^.]+).mp4/.test(G.pathname)}];var nG={};k0(nG,{default:()=>{{return M0}}});var lG=G$(dG(),1);async function f(G,$={headers:{"User-Agent":p.userAgent}}){const{timeout:Y=3000}=$,K=new AbortController,Q=setTimeout(()=>K.abort(),Y),X=await fetch(G,{...$,signal:K.signal});return clearTimeout(Q),X}class B0 extends Error{constructor(G){super(G);this.name="VideoHelper",this.message=G}}class M0{static[z.mailru]=new class{async getVideoData(G){try{return await(await f(`https://my.mail.ru/+/video/meta/${G}?xemail=&ajax_call=1&func_name=&mna=&mnb=&ext=1&_=${(new Date()).getTime()}`)).json()}catch($){console.error("Failed to get mail.ru video info",$.message);return}}};static[z.weverse]=new class{API_ORIGIN="https://global.apis.naver.com/weverse/wevweb";API_APP_ID="be4d79eb8fc7bd008ee82c8ec4ff6fd4";API_HMAC_KEY="1b9cb6378d959b45714bec49971ade22e6e24e42";HEADERS={Accept:"application/json, text/plain, */*",Origin:"https://weverse.io",Referer:"https://weverse.io/"};getURLData(){return{appId:this.API_APP_ID,language:"en",os:"WEB",platform:"WEB",wpf:"pc"}}async createHash(G){const $=Date.now();let Y=G.substring(0,Math.min(255,G.length))+$;const K=await IG(this.API_HMAC_KEY,Y);if(!K)throw new B0("Failed to get weverse HMAC signature");return{wmsgpad:$.toString(),wmd:K}}async getPostPreview(G){const $=`/post/v1.0/post-${G}/preview?`+new URLSearchParams({fieldSet:"postForPreview",...this.getURLData()});try{const Y=await this.createHash($);return await(await f(this.API_ORIGIN+$+"&"+new URLSearchParams(Y),{headers:this.HEADERS})).json()}catch(Y){return console.error(`Failed to get weverse post preview by postId: ${G}`,Y.message),!1}}async getVideoInKey(G){const $=`/video/v1.1/vod/${G}/inKey?`+new URLSearchParams({gcc:"RU",...this.getURLData()});try{const Y=await this.createHash($);return await(await f(this.API_ORIGIN+$+"&"+new URLSearchParams(Y),{method:"POST",headers:this.HEADERS})).json()}catch(Y){return console.error(`Failed to get weverse InKey by videoId: ${G}`,Y.message),!1}}async getVideoInfo(G,$,Y){const K=Date.now();try{return await(await f(`https://global.apis.naver.com/rmcnmv/rmcnmv/vod/play/v2.0/${G}?`+new URLSearchParams({key:$,sid:Y,nonce:K.toString(),devt:"html5_pc",prv:"N",aup:"N",stpb:"N",cpl:"en",env:"prod",lc:"en",adi:JSON.stringify([{adSystem:null}]),adu:"/"}),{headers:this.HEADERS})).json()}catch(Q){return console.error(`Failed to get weverse video info (infraVideoId: ${G}, inkey: ${$}, serviceId: ${Y}`,Q.message),!1}}extractVideoInfo(G){return G.find(($)=>$.useP2P===!1&&$.source.includes(".mp4"))}async getVideoData(G){const $=await this.getPostPreview(G);if(!$)return;const{videoId:Y,serviceId:K,infraVideoId:Q}=$.extension.video;if(!(Y&&K&&Q))return;const X=await this.getVideoInKey(Y);if(!X)return;const H=await this.getVideoInfo(Q,X.inKey,K);if(!H)return;const q=this.extractVideoInfo(H.videos.list);if(!q)return;return{url:q.source,duration:q.duration}}};static[z.kodik]=new class{API_ORIGIN="https://kodik.biz";async getSecureData(G){try{const $=this.API_ORIGIN+G,K=await(await f($,{headers:{"User-Agent":p.userAgent,Origin:this.API_ORIGIN,Referer:this.API_ORIGIN}})).text(),[Q,X,H]=G.split("/").filter((N)=>N);let q=lG.parseFromString(K);const M=Array.from(q.getElementsByTagName("script")).filter((N)=>N.innerHTML.includes(`videoId = "${X}"`));if(!M.length)throw new B0("Failed to find secure script");const J=M[0].textContent.trim().match(/'{[^']+}'/)?.[0];if(!J)throw new B0("Secure json wasn't found in secure script");const C=JSON.parse(J.replaceAll("'",""));return{videoType:Q,videoId:X,hash:H,...C}}catch($){return console.error(`Failed to get kodik secure data by videoPath: ${G}.`,$.message),!1}}async getFtor(G){const{videoType:$,videoId:Y,hash:K,d:Q,d_sign:X,pd:H,pd_sign:q,ref:M,ref_sign:J}=G;try{return await(await f(this.API_ORIGIN+"/ftor",{method:"POST",headers:{"User-Agent":p.userAgent,Origin:this.API_ORIGIN,Referer:`${this.API_ORIGIN}/${$}/${Y}/${K}/360p`},body:new URLSearchParams({d:Q,d_sign:X,pd:H,pd_sign:q,ref:decodeURIComponent(M),ref_sign:J,bad_user:"false",cdn_is_working:"true",info:"{}",type:$,hash:K,id:Y})})).json()}catch(C){return console.error(`Failed to get kodik video data (type: ${$}, id: ${Y}, hash: ${K})`,C.message),!1}}decryptUrl(G){return"https:"+atob(G.replace(/[a-zA-Z]/g,function(Y){const K=Y.charCodeAt(0)+13;return String.fromCharCode((Y<="Z"?90:122)>=K?K:K-26)}))}async getVideoData(G){const $=await this.getSecureData(G);if(!$)return;const Y=await this.getFtor($);if(!Y)return;const Q=Object.entries(Y.links[Y.default.toString()]).find(([X,H])=>H.type==="application/x-mpegURL")?.[1];if(!Q)return;return{url:this.decryptUrl(Q.src)}}};static[z.patreon]=new class{async getPosts(G){try{return await(await f(`https://www.patreon.com/api/posts/${G}?json-api-use-default-includes=false`)).json()}catch($){return console.error(`Failed to get patreon posts by postId: ${G}.`,$.message),!1}}async getVideoData(G){const $=await this.getPosts(G);if(!$)return;const Y=$.data.attributes.post_file.url;if(!Y)return;return{url:Y}}}}function uG(G){if(G.startsWith("file://"))return!1;let $;try{$=new URL(G)}catch(Q){return console.error(`Invalid URL: ${G}. Have you forgotten https?`),!1}if($.pathname.endsWith(".mp4"))return{host:z.custom};const Y=$.hostname,K=(Q)=>{if(Q instanceof RegExp)return Q.test(Y);else if(typeof Q==="string")return Y.includes(Q);else if(typeof Q==="function")return Q($);return!1};return wG.find((Q)=>{return(Array.isArray(Q.match)?Q.match.some(K):K(Q.match))&&Q.host&&Q.url})}async function aG(G,$){const Y=new URL($);switch(G.host){case z.custom:return Y.href;case z.piped:case z.invidious:case z.youtube:if(Y.hostname==="youtu.be")Y.search=`?v=${Y.pathname.replace("/","")}`,Y.pathname="/watch";return Y.pathname.match(/(?:watch|embed|shorts|live)\/([^/]+)/)?.[1]||Y.searchParams.get("v");case z.vk:{const K=Y.pathname.match(/^\/(video|clip)-?[0-9]{8,9}_[0-9]{9}$/),Q=Y.searchParams.get("z"),X=Y.searchParams.get("oid"),H=Y.searchParams.get("id");if(K)return K[0].slice(1);else if(Q)return Q.split("/")[0];else if(X&&H)return`video-${Math.abs(parseInt(X))}_${H}`;return null}case z.nine_gag:case z.gag:return Y.pathname.match(/gag\/([^/]+)/)?.[1];case z.twitch:{const K=Y.pathname.match(/([^/]+)\/(?:clip)\/([^/]+)/),Q=/^clips\.twitch\.tv$/.test(Y.hostname);if(/^m\.twitch\.tv$/.test(Y.hostname))return Y.href.match(/videos\/([^/]+)/)?.[0]||Y.pathname.slice(1);else if(/^player\.twitch\.tv$/.test(Y.hostname))return`videos/${Y.searchParams.get("video")}`;else if(Q){const X=Y.pathname.slice(1),H=X==="embed",J=(await(await f(`https://clips.twitch.tv/${H?Y.searchParams.get("clip"):Y.pathname.slice(1)}`,{headers:{"User-Agent":"Googlebot/2.1 (+http://www.googlebot.com/bot.html)"}})).text()).match(/"url":"https:\/\/www\.twitch\.tv\/([^"]+)"/);if(!J)return null;return`${J[1]}/clip/${H?Y.searchParams.get("clip"):X}`}else if(K)return K[0];return Y.pathname.match(/(?:videos)\/([^/]+)/)?.[0]}case z.proxitok:case z.tiktok:return Y.pathname.match(/([^/]+)\/video\/([^/]+)/)?.[0];case z.vimeo:{const K=Y.searchParams.get("app_id"),Q=Y.pathname.match(/[^/]+\/[^/]+$/)?.[0]||Y.pathname.match(/[^/]+$/)?.[0];return K?`${Q}?app_id=${K}`:Q}case z.xvideos:return Y.pathname.match(/[^/]+\/[^/]+$/)?.[0];case z.pornhub:return Y.searchParams.get("viewkey")||Y.pathname.match(/embed\/([^/]+)/)?.[1];case z.twitter:return Y.pathname.match(/status\/([^/]+)/)?.[1];case z.rumble:case z.facebook:return Y.pathname.slice(1);case z.rutube:return Y.pathname.match(/(?:video|embed)\/([^/]+)/)?.[1];case z.bilibili:{const K=Y.searchParams.get("bvid");if(K)return K;let Q=Y.pathname.match(/video\/([^/]+)/)?.[1];if(Q&&Y.searchParams.get("p")!==null)Q+=`/?p=${Y.searchParams.get("p")}`;return Q}case z.mailru:{const K=Y.pathname;if(K.startsWith("/v/")||K.startsWith("/mail/"))return K.slice(1);const Q=K.match(/video\/embed\/([^/]+)/)?.[1];if(!Q)return null;const X=await M0.mailru.getVideoData(Q);if(!X)return null;return X.meta.url.replace("//my.mail.ru/","")}case z.bitchute:return Y.pathname.match(/(video|embed)\/([^/]+)/)?.[2];case z.eporner:return Y.pathname.match(/video-([^/]+)\/([^/]+)/)?.[0];case z.peertube:return Y.pathname.match(/\/w\/([^/]+)/)?.[0];case z.dailymotion:return Y.hostname==="dai.ly"?Y.pathname.slice(1):Y.pathname.match(/video\/([^/]+)/)?.[1];case z.trovo:{const K=Y.searchParams.get("vid");if(!K)return null;const Q=Y.pathname.match(/([^/]+)\/([\d]+)/)?.[0];if(!Q)return null;return`${Q}?vid=${K}`}case z.yandexdisk:return Y.pathname.match(/\/i\/([^/]+)/)?.[1];case z.okru:return Y.pathname.match(/\/video\/(\d+)/)?.[1];case z.googledrive:return Y.pathname.match(/\/file\/d\/([^/]+)/)?.[1];case z.bannedvideo:{const K=Y.searchParams.get("id");return(await(await f(`${G.url}${K}`)).text()).match(/https:\/\/download.assets.video\/videos\/([^.]+).mp4/)?.[0]}case z.weverse:return Y.pathname.match(/([^/]+)\/(live|media)\/([^/]+)/)?.[3];case z.newgrounds:return Y.pathname.match(/([^/]+)\/(view)\/([^/]+)/)?.[0];case z.egghead:return Y.pathname.slice(1);case z.youku:return Y.pathname.match(/v_show\/id_[\w=]+/)?.[0];case z.kodik:return Y.pathname.match(/\/(seria|video)\/([^/]+)\/([^/]+)\/([\d]+)p/)?.[0];case z.patreon:{const K=Y.pathname.match(/posts\/([^/]+)/)?.[1];if(!K)return;return K.replace(/[^\d.]/g,"")}case z.custom:return Y.pathname+Y.search;default:return}}async function $$(G){const $=uG(G);if(!$)throw new V0(`URL: "${G}" is unknown service`);let Y=await aG($,G);if(!Y)throw new V0(`Entered unsupported link: "${G}"`);if($.host===z.peertube)$.url=new URL(G).origin;if([z.custom,z.bannedvideo].includes($.host))return{url:Y,videoId:Y,duration:void 0};if(![z.weverse,z.kodik,z.patreon].includes($.host))return{url:$.url+Y,videoId:Y,duration:void 0};const K=await M0[$.host].getVideoData(Y);if(!K)throw new V0(`Failed to get video raw url for ${$.host}`);return{url:K.url,videoId:Y,duration:K.duration}}class V0 extends Error{constructor(G){super(G);this.name="VideoDataError",this.message=G}}class u extends Error{constructor(G){super(G);this.name="VOTJSError",this.message=G}}class y0{host;fetch;fetchOpts;getVideoDataFn;requestLang;responseLang;userAgent=p.userAgent;headers={"User-Agent":this.userAgent,Accept:"application/x-protobuf","Accept-Language":"en","Content-Type":"application/x-protobuf",Pragma:"no-cache","Cache-Control":"no-cache","Sec-Fetch-Mode":"no-cors"};constructor({host:G=p.host,fetchFn:$=fetch,fetchOpts:Y={},getVideoDataFn:K=$$,requestLang:Q="en",responseLang:X="ru"}={}){this.host=G,this.fetch=$,this.fetchOpts=Y,this.getVideoDataFn=K,this.requestLang=Q,this.responseLang=X}async request(G,$,Y={}){const K={method:"POST",headers:{...this.headers,...Y},body:new Blob([$]),...this.fetchOpts};try{const Q=await this.fetch(`https://${this.host}${G}`,K),X=await Q.arrayBuffer();return{success:Q.status===200,data:X}}catch(Q){return console.error("[vot.js]",Q.message),{success:!1,data:null}}}async translateVideo({url:G,duration:$=p.defaultDuration,requestLang:Y=this.requestLang,responseLang:K=this.responseLang,translationHelp:Q=null,headers:X={}}){const{url:H,duration:q}=await this.getVideoDataFn(G),M=n.encodeTranslationRequest(H,q??$,Y,K,Q),J=await this.request("/video-translation/translate",M,{"Vtrans-Signature":await X0(M),"Sec-Vtrans-Token":H0(!1),...X});if(!J.success)throw new u("Failed to request video translation");const C=n.decodeTranslationResponse(J.data);switch(C.status){case b.FAILED:throw new u("Yandex couldn't translate video");case b.FINISHED:case b.PART_CONTENT:if(!C.url)throw new u("Audio link wasn't received from Yandex response");return{translated:!0,url:C.url,remainingTime:C.remainingTime??-1};case b.WAITING:return{translated:!1,remainingTime:C.remainingTime};case b.LONG_WAITING:case b.LONG_WAITING_2:return{translated:!1,remainingTime:C.remainingTime??-1}}throw console.error("[vot.js] Unknown response",C),new u("Unknown response from Yandex")}async getSubtitles({url:G,requestLang:$=this.requestLang,headers:Y={}}){const{url:K}=await this.getVideoDataFn(G),Q=n.encodeSubtitlesRequest(K,$),X=await this.request("/video-subtitles/get-subtitles",Q,{"Vsubs-Signature":await X0(Q),"Sec-Vsubs-Token":H0(!1),...Y});if(!X.success)throw new u("Failed to request video subtitles");return n.decodeSubtitlesResponse(X.data)}async pingStream({pingId:G,headers:$={}}){const Y=n.encodeStreamPingRequest(G);if(!(await this.request("/stream-translation/ping-stream",Y,{"Vtrans-Signature":await X0(Y),"Sec-Vtrans-Token":H0(!1),...$})).success)throw new u("Failed to request stream ping");return!0}async translateStream({url:G,requestLang:$=this.requestLang,responseLang:Y=this.responseLang,headers:K={}}){const{url:Q}=await this.getVideoDataFn(G),X=n.encodeStreamRequest(Q,$,Y),H=await this.request("/stream-translation/translate-stream",X,{"Vtrans-Signature":await X0(X),"Sec-Vtrans-Token":H0(!1),...K});if(!H.success)throw new u("Failed to request stream translation");const q=n.decodeStreamResponse(H.data),M=q.interval;switch(M){case 0:case 10:return{translated:!1,interval:M,message:M===0?"streamNoConnectionToServer":"translationTakeFewMinutes"};case 20:return{translated:!0,interval:M,result:q.translatedInfo}}throw console.error("[vot.js] Unknown response",q),new u("Unknown response from Yandex")}}class iG extends y0{constructor(){super(...arguments)}async request(G,$,Y={}){const K={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({headers:{...this.headers,...Y},body:Array.from($)}),...this.fetchOpts};try{const Q=await this.fetch(`https://${this.host}${G}`,K),X=await Q.arrayBuffer();return{success:Q.status===200,data:X}}catch(Q){return console.error("[vot.js]",Q.message),{success:!1,data:null}}}}var hY={};var vY={};var cY={};export{n as yandexProtobuf,H0 as getUUID,X0 as getSignature,y0 as default,RG as YandexType,UG as YandexProtobufType,cY as WeverseType,nG as VideoHelper,oG as VideoData,iG as VOTWorkerClient,vY as MailRuType,hY as ClientType};
